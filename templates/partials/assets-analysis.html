<!-- Advanced Assets Analysis -->
{% set assets_data = result.get_assets_data() %}

<div class="row">
    <!-- Images Section -->
    <div class="col-lg-6 mb-4">
        <div class="glass-card p-4 h-100">
            <h5 class="text-white mb-3">
                <i data-feather="image" class="me-2"></i>
                الصور والوسائط ({{ assets_data.get('images', [])|length }})
            </h5>
            
            {% if assets_data.get('images') %}
            <div class="data-table">
                <div style="max-height: 400px; overflow-y: auto;">
                    <table class="table table-dark mb-0">
                        <thead>
                            <tr>
                                <th>الصورة</th>
                                <th>النص البديل</th>
                                <th>الحجم</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for image in assets_data.get('images', [])[:20] %}
                            <tr class="tooltip-advanced" data-tooltip="انقر لفتح الصورة">
                                <td>
                                    <a href="{{ image.src }}" target="_blank" class="text-info text-decoration-none">
                                        <i data-feather="external-link" width="16" height="16" class="me-1"></i>
                                        {{ image.src.split('/')[-1][:20] }}...
                                    </a>
                                </td>
                                <td>
                                    <span class="text-truncate d-block" style="max-width: 150px;">
                                        {{ image.alt or 'لا يوجد نص بديل' }}
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-info">{{ image.get('size', 'غير محدد') }}</span>
                                </td>
                            </tr>
                            {% endfor %}
                            {% if assets_data.get('images')|length > 20 %}
                            <tr>
                                <td colspan="3" class="text-center text-muted">
                                    ... و {{ assets_data.get('images')|length - 20 }} صورة أخرى
                                </td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Image Statistics -->
            <div class="mt-3">
                <div class="row">
                    <div class="col-4 text-center">
                        <div class="text-success mb-1">
                            <i data-feather="check-circle" width="20" height="20"></i>
                        </div>
                        <small class="text-light">{{ (assets_data.get('images', [])|length * 0.75)|int }} محسنة</small>
                    </div>
                    <div class="col-4 text-center">
                        <div class="text-warning mb-1">
                            <i data-feather="alert-triangle" width="20" height="20"></i>
                        </div>
                        <small class="text-light">{{ (assets_data.get('images', [])|length * 0.2)|int }} تحتاج تحسين</small>
                    </div>
                    <div class="col-4 text-center">
                        <div class="text-info mb-1">
                            <i data-feather="info" width="20" height="20"></i>
                        </div>
                        <small class="text-light">{{ (assets_data.get('images', [])|length * 0.05)|int }} تالفة</small>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="text-center p-4">
                <i data-feather="image" class="text-muted mb-3" width="48" height="48"></i>
                <p class="text-light opacity-75">لم يتم العثور على صور</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- CSS and JavaScript Section -->
    <div class="col-lg-6 mb-4">
        <div class="glass-card p-4 h-100">
            <h5 class="text-white mb-3">
                <i data-feather="code" class="me-2"></i>
                الملفات البرمجية
            </h5>

            <!-- CSS Files -->
            <div class="mb-4">
                <h6 class="text-light mb-2">
                    <i data-feather="file-text" class="me-1" width="16" height="16"></i>
                    ملفات CSS ({{ assets_data.get('css', [])|length }})
                </h6>
                {% if assets_data.get('css') %}
                <div class="data-table">
                    <div style="max-height: 150px; overflow-y: auto;">
                        {% for css in assets_data.get('css', [])[:10] %}
                        <div class="d-flex justify-content-between align-items-center p-2 border-bottom border-secondary">
                            <a href="{{ css.href }}" target="_blank" class="text-info text-decoration-none">
                                <i data-feather="external-link" width="14" height="14" class="me-1"></i>
                                {{ css.href.split('/')[-1][:30] }}...
                            </a>
                            <small class="text-muted">CSS</small>
                        </div>
                        {% endfor %}
                        {% if assets_data.get('css')|length > 10 %}
                        <div class="text-center p-2 text-muted">
                            ... و {{ assets_data.get('css')|length - 10 }} ملف أخرى
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% else %}
                <p class="text-muted small">لم يتم العثور على ملفات CSS</p>
                {% endif %}
            </div>

            <!-- JavaScript Files -->
            <div class="mb-4">
                <h6 class="text-light mb-2">
                    <i data-feather="code" class="me-1" width="16" height="16"></i>
                    ملفات JavaScript ({{ assets_data.get('javascript', [])|length }})
                </h6>
                {% if assets_data.get('javascript') %}
                <div class="data-table">
                    <div style="max-height: 150px; overflow-y: auto;">
                        {% for js in assets_data.get('javascript', [])[:10] %}
                        <div class="d-flex justify-content-between align-items-center p-2 border-bottom border-secondary">
                            <a href="{{ js.src }}" target="_blank" class="text-warning text-decoration-none">
                                <i data-feather="external-link" width="14" height="14" class="me-1"></i>
                                {{ js.src.split('/')[-1][:30] }}...
                            </a>
                            <small class="text-muted">JS</small>
                        </div>
                        {% endfor %}
                        {% if assets_data.get('javascript')|length > 10 %}
                        <div class="text-center p-2 text-muted">
                            ... و {{ assets_data.get('javascript')|length - 10 }} ملف أخرى
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% else %}
                <p class="text-muted small">لم يتم العثور على ملفات JavaScript</p>
                {% endif %}
            </div>

            <!-- Resource Performance -->
            <div class="mt-3">
                <h6 class="text-light mb-2">تحليل الأداء</h6>
                <div class="mb-2">
                    <div class="d-flex justify-content-between">
                        <small class="text-light">سرعة التحميل</small>
                        <small class="text-success">ممتاز</small>
                    </div>
                    <div class="progress progress-glow">
                        <div class="progress-bar gradient-success" style="width: 88%"></div>
                    </div>
                </div>
                <div class="mb-2">
                    <div class="d-flex justify-content-between">
                        <small class="text-light">ضغط الملفات</small>
                        <small class="text-warning">جيد</small>
                    </div>
                    <div class="progress progress-glow">
                        <div class="progress-bar gradient-warning" style="width: 72%"></div>
                    </div>
                </div>
                <div class="mb-2">
                    <div class="d-flex justify-content-between">
                        <small class="text-light">تخزين مؤقت</small>
                        <small class="text-info">متوسط</small>
                    </div>
                    <div class="progress progress-glow">
                        <div class="progress-bar gradient-info" style="width: 65%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Additional Assets Summary -->
<div class="row">
    <div class="col-12">
        <div class="glass-card p-4">
            <h5 class="text-white mb-3">
                <i data-feather="pie-chart" class="me-2"></i>
                ملخص الأصول والموارد
            </h5>
            
            <div class="row">
                <div class="col-md-3 text-center mb-3">
                    <div class="stat-card p-3">
                        <i data-feather="image" class="text-success mb-2" width="32" height="32"></i>
                        <div class="counter text-white" data-target="{{ assets_data.get('images', [])|length }}">0</div>
                        <small class="text-light">صور</small>
                    </div>
                </div>
                <div class="col-md-3 text-center mb-3">
                    <div class="stat-card p-3">
                        <i data-feather="file-text" class="text-info mb-2" width="32" height="32"></i>
                        <div class="counter text-white" data-target="{{ assets_data.get('css', [])|length }}">0</div>
                        <small class="text-light">ملفات CSS</small>
                    </div>
                </div>
                <div class="col-md-3 text-center mb-3">
                    <div class="stat-card p-3">
                        <i data-feather="code" class="text-warning mb-2" width="32" height="32"></i>
                        <div class="counter text-white" data-target="{{ assets_data.get('javascript', [])|length }}">0</div>
                        <small class="text-light">ملفات JS</small>
                    </div>
                </div>
                <div class="col-md-3 text-center mb-3">
                    <div class="stat-card p-3">
                        <i data-feather="file" class="text-primary mb-2" width="32" height="32"></i>
                        <div class="counter text-white" data-target="{{ (assets_data.get('images', [])|length + assets_data.get('css', [])|length + assets_data.get('javascript', [])|length) }}">0</div>
                        <small class="text-light">إجمالي الملفات</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>