
{% extends "base.html" %}

{% block title %}ุฃุฏุงุฉ ุงุณุชุฎุฑุงุฌ ุงูููุงูุน ุงูุดุงููุฉ - ุฌููุน ุงููุฒุงูุง{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <!-- ุนููุงู ุงูุฃุฏุงุฉ ูุน ุฌููุน ุงููุฒุงูุง -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="h2 text-primary">
                <i data-feather="download" class="me-2"></i>
                ๐ ุฃุฏุงุฉ ุงุณุชุฎุฑุงุฌ ุงูููุงูุน ุงูุดุงููุฉ - ุฌููุน ุงููุฒุงูุง
            </h1>
            <p class="text-muted">ููุตุฉ ูุชูุงููุฉ ูุงุณุชุฎุฑุงุฌ ูุชุญููู ุงูููุงูุน ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุชุทูุฑ</p>
        </div>
    </div>

    <!-- ุดุฑูุท ุงููุฒุงูุง ุงูุณุฑูุน -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-gradient-primary text-white">
                <div class="card-body">
                    <h5 class="card-title">๐ ุฌููุน ุงููุฒุงูุง ุงููุชุงุญุฉ ูู ููุตุฉ ูุงุญุฏุฉ</h5>
                    <div class="row">
                        <div class="col-md-3">
                            <h6><i data-feather="shield" class="me-1"></i> ุงูุฃูุงู ูุงูุญูุงูุฉ</h6>
                            <ul class="small">
                                <li>ุชุญููู ุงูุซุบุฑุงุช ุงูุฃูููุฉ</li>
                                <li>ูุญุต SSL ูTLS</li>
                                <li>ูุดู ุงูุจุฑูุฌูุงุช ุงูุฎุจูุซุฉ</li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h6><i data-feather="zap" class="me-1"></i> ุงูุฃุฏุงุก ูุงูุณุฑุนุฉ</h6>
                            <ul class="small">
                                <li>ุชุญููู ุณุฑุนุฉ ุงูุชุญููู</li>
                                <li>ุชูููู Core Web Vitals</li>
                                <li>ูุญุต ุงูุงุณุชุฌุงุจุฉ ุงููุญูููุฉ</li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h6><i data-feather="search" class="me-1"></i> SEO ูุชุญุณูู ุงููุญุฑูุงุช</h6>
                            <ul class="small">
                                <li>ุชุญููู ุงููููุงุช ุงูููุชุงุญูุฉ</li>
                                <li>ูุญุต ุงูุจูุงูุงุช ุงูููุธูุฉ</li>
                                <li>ุชูููู Meta Tags</li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h6><i data-feather="users" class="me-1"></i> ุชุญููู ุงูููุงูุณูู</h6>
                            <ul class="small">
                                <li>ููุงุฑูุฉ ุดุงููุฉ</li>
                                <li>ุชุญููู ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ</li>
                                <li>ูุฑุงูุจุฉ ุงูุงุชุฌุงูุงุช</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฃุฒุฑุงุฑ ุงููุตูู ุงูุณุฑูุน ูููุฒุงูุง -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">๐ฏ ุงููุตูู ุงูุณุฑูุน ูุฌููุน ุฃุฏูุงุช ุงูุชุญููู</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="d-grid">
                                <button class="btn btn-outline-danger" onclick="openAnalysisTool('security')">
                                    <i data-feather="shield" class="me-2"></i>
                                    ุชุญููู ุงูุฃูุงู
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-grid">
                                <button class="btn btn-outline-warning" onclick="openAnalysisTool('performance')">
                                    <i data-feather="zap" class="me-2"></i>
                                    ุชุญููู ุงูุฃุฏุงุก
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-grid">
                                <button class="btn btn-outline-success" onclick="openAnalysisTool('seo')">
                                    <i data-feather="search" class="me-2"></i>
                                    ุชุญููู SEO
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-grid">
                                <button class="btn btn-outline-info" onclick="openAnalysisTool('competitor')">
                                    <i data-feather="users" class="me-2"></i>
                                    ุชุญููู ุงูููุงูุณูู
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-grid">
                                <button class="btn btn-outline-purple" onclick="openAnalysisTool('comprehensive')">
                                    <i data-feather="layers" class="me-2"></i>
                                    ุงูุชุญููู ุงูุดุงูู
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="d-grid">
                                <button class="btn btn-outline-secondary" onclick="openAnalysisTool('dashboard')">
                                    <i data-feather="bar-chart-2" class="me-2"></i>
                                    ููุญุฉ ุงูุชุญูู
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุชุญุฐูุฑ ููู -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-warning">
                <h5><i data-feather="alert-triangle" class="me-2"></i>ุชุญุฐูุฑ ูุงู</h5>
                <p class="mb-1">ูุฐู ุงูุฃุฏุงุฉ ูุฎุตุตุฉ ููุฃุบุฑุงุถ ุงูุชุนููููุฉ ูุงูุจุญุซูุฉ ููุท. ุชุฃูุฏ ูู ุงุญุชุฑุงู:</p>
                <ul class="mb-0">
                    <li>ุญููู ุงูุทุจุน ูุงููุดุฑ ูููุญุชูู</li>
                    <li>ุดุฑูุท ุงูุงุณุชุฎุฏุงู ูููููุน ุงููุณุชูุฏู</li>
                    <li>ุงูููุงููู ุงููุญููุฉ ูุงูุฏูููุฉ</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ูููุฐุฌ ุงูุงุณุชุฎุฑุงุฌ ุงููุญุฏุซ -->
    <div class="row mb-4">
        <div class="col-lg-10 mx-auto">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i data-feather="settings" class="me-2"></i>
                        ุฅุนุฏุงุฏุงุช ุงูุงุณุชุฎุฑุงุฌ ูุงูุชุญููู ุงูุดุงูู
                    </h5>
                </div>
                <div class="card-body">
                    <form id="extractorForm">
                        <div class="mb-3">
                            <label for="websiteUrl" class="form-label">ุฑุงุจุท ุงููููุน ุงููุฑุงุฏ ุงุณุชุฎุฑุงุฌู ูุชุญูููู</label>
                            <div class="input-group">
                                <input type="url" class="form-control" id="websiteUrl" required 
                                       placeholder="https://example.com">
                                <button class="btn btn-outline-secondary" type="button" onclick="analyzeBeforeExtract()">
                                    <i data-feather="eye" class="me-1"></i>
                                    ุชุญููู ุณุฑูุน
                                </button>
                            </div>
                            <div class="form-text">ุฃุฏุฎู ุงูุฑุงุจุท ุงููุงูู ูููููุน ูุน http:// ุฃู https://</div>
                        </div>

                        <!-- ุฎูุงุฑุงุช ุงูุชุญููู ุงููุชูุฏู -->
                        <div class="mb-3">
                            <label class="form-label">ุฃููุงุน ุงูุชุญููู ุงููุทููุจุฉ (ุงุฎุชุฑ ุงูููุงุณุจ ูู)</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enableSecurity" checked>
                                        <label class="form-check-label" for="enableSecurity">
                                            <i data-feather="shield" width="16" height="16"></i>
                                            ุชุญููู ุงูุฃูุงู ูุงูุซุบุฑุงุช
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enablePerformance" checked>
                                        <label class="form-check-label" for="enablePerformance">
                                            <i data-feather="zap" width="16" height="16"></i>
                                            ุชุญููู ุงูุฃุฏุงุก ูุงูุณุฑุนุฉ
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enableSEO" checked>
                                        <label class="form-check-label" for="enableSEO">
                                            <i data-feather="search" width="16" height="16"></i>
                                            ุชุญููู SEO ูุชุญุณูู ุงููุญุฑูุงุช
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enableTech" checked>
                                        <label class="form-check-label" for="enableTech">
                                            <i data-feather="cpu" width="16" height="16"></i>
                                            ุชุญููู ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enableContent" checked>
                                        <label class="form-check-label" for="enableContent">
                                            <i data-feather="file-text" width="16" height="16"></i>
                                            ุชุญููู ุงููุญุชูู ูุงููููู
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="enableCompetitor">
                                        <label class="form-check-label" for="enableCompetitor">
                                            <i data-feather="users" width="16" height="16"></i>
                                            ุชุญููู ุงูููุงูุณูู (ุงุฎุชูุงุฑู)
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="maxPages" class="form-label">ุนุฏุฏ ุงูุตูุญุงุช ุงูุฃูุตู</label>
                                <select class="form-select" id="maxPages">
                                    <option value="10">10 ุตูุญุงุช (ุณุฑูุน)</option>
                                    <option value="25" selected>25 ุตูุญุฉ (ูุชูุณุท)</option>
                                    <option value="50">50 ุตูุญุฉ (ุดุงูู)</option>
                                    <option value="100">100 ุตูุญุฉ (ูุงูู)</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="extractionDepth" class="form-label">ุนูู ุงูุชุญููู</label>
                                <select class="form-select" id="extractionDepth">
                                    <option value="basic">ุฃุณุงุณู (ูุญุชูู ูุตู)</option>
                                    <option value="standard" selected>ูุนูุงุฑู (ูุญุชูู + ุชุญููู)</option>
                                    <option value="complete">ุดุงูู (ูู ุดูุก + AI)</option>
                                </select>
                            </div>
                        </div>

                        <!-- ุฎูุงุฑุงุช ูุชูุฏูุฉ ููุชูุธูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู -->
                        <div class="mb-3">
                            <label class="form-label">๐ค ุงูุชูุธูู ุงูุฐูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="useAIBlocker" checked>
                                <label class="form-check-label" for="useAIBlocker">
                                    <strong>ุชูุนูู ุญุงุฌุจ ุงูุฅุนูุงูุงุช ุงููุชุทูุฑ ุจุงูู AI</strong>
                                    <small class="text-muted d-block">95% ุฏูุฉ ูู ุญุฌุจ ุงูุฅุนูุงูุงุช ูุนูุงุตุฑ ุงูุชุชุจุน</small>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="removeAds" checked>
                                <label class="form-check-label" for="removeAds">
                                    ุฅุฒุงูุฉ ุงูุฅุนูุงูุงุช ูุงูุนูุงุตุฑ ุงูุชุฑููุฌูุฉ
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="removeTracking" checked>
                                <label class="form-check-label" for="removeTracking">
                                    ุฅุฒุงูุฉ ุณูุฑููพุช ุงูุชุชุจุน ูุงูุชุญูููุงุช
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="cleanCode" checked>
                                <label class="form-check-label" for="cleanCode">
                                    ุชูุธูู ุงูููุฏ ูุฅุฒุงูุฉ ุงูุชุนูููุงุช
                                </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">ุนูุงุตุฑ ูุทููุจ ุงุณุชุฎุฑุงุฌูุง</label>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="extractText" checked>
                                        <label class="form-check-label" for="extractText">
                                            ุงููุญุชูู ุงููุตู
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="extractImages" checked>
                                        <label class="form-check-label" for="extractImages">
                                            ุงูุตูุฑ ูุงูุฑุณููุงุช
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="extractCSS" checked>
                                        <label class="form-check-label" for="extractCSS">
                                            ูููุงุช ุงูุชุตููู (CSS)
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="extractJS">
                                        <label class="form-check-label" for="extractJS">
                                            ูููุงุช JavaScript
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="extractStructure" checked>
                                        <label class="form-check-label" for="extractStructure">
                                            ุงูุจูุงูุงุช ุงูููุธูุฉ
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="extractMeta" checked>
                                        <label class="form-check-label" for="extractMeta">
                                            ุงูุจูุงูุงุช ุงููุตููุฉ
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ุฃุฒุฑุงุฑ ุงูุชุดุบูู -->
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <button type="button" class="btn btn-outline-info me-md-2" onclick="previewAnalysis()">
                                <i data-feather="eye" class="me-2"></i>
                                ูุนุงููุฉ ุณุฑูุนุฉ
                            </button>
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i data-feather="download" class="me-2"></i>
                                ุจุฏุก ุงูุงุณุชุฎุฑุงุฌ ูุงูุชุญููู ุงูุดุงูู
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ุดุฑูุท ุงูุชูุฏู -->
    <div class="row mb-4" id="progressSection" style="display: none;">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <div class="d-flex justify-content-between mb-2">
                        <span>ุฌุงุฑู ุงูุงุณุชุฎุฑุงุฌ ูุงูุชุญููู...</span>
                        <span id="progressText">0%</span>
                    </div>
                    <div class="progress mb-3">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" 
                             id="progressBar" role="progressbar" style="width: 0%"></div>
                    </div>
                    <div id="currentStatus" class="text-muted">
                        <i data-feather="clock" class="me-1"></i>
                        ุจุฏุก ุงูุนูููุฉ...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฅุญุตุงุฆูุงุช ูุจุงุดุฑุฉ ูุน ุฌููุน ุงููุฒุงูุง -->
    <div class="row mb-4" id="liveStats" style="display: none;">
        <div class="col-md-2 mb-3">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <h4 id="pagesExtracted">0</h4>
                    <small>ุตูุญุงุช ูุณุชุฎุฑุฌุฉ</small>
                </div>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card bg-success text-white">
                <div class="card-body text-center">
                    <h4 id="imagesDownloaded">0</h4>
                    <small>ุตูุฑ ูุญููุฉ</small>
                </div>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card bg-info text-white">
                <div class="card-body text-center">
                    <h4 id="cssFiles">0</h4>
                    <small>ูููุงุช CSS</small>
                </div>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card bg-warning text-white">
                <div class="card-body text-center">
                    <h4 id="adsRemoved">0</h4>
                    <small>ุฅุนูุงูุงุช ูุญุฐููุฉ</small>
                </div>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card bg-danger text-white">
                <div class="card-body text-center">
                    <h4 id="securityIssues">0</h4>
                    <small>ูุดุงูู ุฃูููุฉ</small>
                </div>
            </div>
        </div>
        <div class="col-md-2 mb-3">
            <div class="card bg-secondary text-white">
                <div class="card-body text-center">
                    <h4 id="seoScore">0</h4>
                    <small>ููุงุท SEO</small>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุชุงุฆุฌ ุงูุงุณุชุฎุฑุงุฌ ูุงูุชุญููู -->
    <div class="row" id="resultsSection" style="display: none;">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i data-feather="check-circle" class="me-2 text-success"></i>
                        ุงูุชูู ุงูุงุณุชุฎุฑุงุฌ ูุงูุชุญููู ุงูุดุงูู ุจูุฌุงุญ!
                    </h5>
                </div>
                <div class="card-body">
                    <!-- ูุชุงุฆุฌ ุงูุชุญูููุงุช -->
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <h6>๐ ููุฎุต ุงูุชุญูููุงุช:</h6>
                            <div id="analysisResults" class="row">
                                <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-8">
                            <h6>ููุฎุต ุงูุนูููุฉ:</h6>
                            <ul id="extractionSummary">
                                <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
                            </ul>
                            
                            <h6 class="mt-3">ุงููุฌูุฏุงุช ุงูููุดุฃุฉ:</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="list-unstyled">
                                        <li><i data-feather="folder" class="me-1"></i> <code>pages/</code> - ุตูุญุงุช HTML ูุธููุฉ</li>
                                        <li><i data-feather="folder" class="me-1"></i> <code>content/</code> - ูุญุชูู ูุตู</li>
                                        <li><i data-feather="folder" class="me-1"></i> <code>assets/images/</code> - ุงูุตูุฑ</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul class="list-unstyled">
                                        <li><i data-feather="folder" class="me-1"></i> <code>assets/css/</code> - ูููุงุช ุงูุชุตููู</li>
                                        <li><i data-feather="folder" class="me-1"></i> <code>assets/js/</code> - ูููุงุช JavaScript</li>
                                        <li><i data-feather="folder" class="me-1"></i> <code>reports/</code> - ุชูุงุฑูุฑ ุงูุชุญููู</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="d-grid gap-2">
                                <button class="btn btn-success" id="launchBtn">
                                    <i data-feather="external-link" class="me-2"></i>
                                    ๐ ุชุดุบูู ุงููููุน ุงููุณุชุฎุฑุฌ
                                </button>
                                <button class="btn btn-primary" id="downloadBtn">
                                    <i data-feather="download" class="me-2"></i>
                                    ุชุญููู ุงููููุงุช ุงููุณุชุฎุฑุฌุฉ
                                </button>
                                <button class="btn btn-info" id="viewReportBtn">
                                    <i data-feather="file-text" class="me-2"></i>
                                    ุนุฑุถ ุงูุชูุฑูุฑ ุงูุชูุตููู
                                </button>
                                <button class="btn btn-secondary" id="newExtractionBtn">
                                    <i data-feather="refresh-cw" class="me-2"></i>
                                    ุงุณุชุฎุฑุงุฌ ูููุน ุฌุฏูุฏ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ูุณุงุนุฏุฉ ูุฅุฑุดุงุฏุงุช ูุญุฏุซุฉ -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i data-feather="help-circle" class="me-2"></i>
                        ููููุฉ ุงูุงุณุชุฎุฏุงู - ุงูุฏููู ุงูุดุงูู
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <h6><i data-feather="info" class="me-1"></i> ูุง ุชุณุชุฎุฑุฌู ุงูุฃุฏุงุฉ:</h6>
                            <ul class="small">
                                <li>ุงููุญุชูู ุงููุตู ูุน ุชูุธูู ุฐูู AI</li>
                                <li>ุฌููุน ุงูุตูุฑ ูุงูุฑุณููุงุช</li>
                                <li>ูููุงุช CSS ููุธูุฉ ูู ุงูุชุชุจุน</li>
                                <li>ุงูุจูุงูุงุช ุงูููุธูุฉ ูุงููุตููุฉ</li>
                                <li>ุชูุงุฑูุฑ ุฃูููุฉ ุดุงููุฉ</li>
                                <li>ุชุญููู SEO ูุชูุฏู</li>
                                <li>ููุงุฑูุงุช ุงูุฃุฏุงุก</li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h6><i data-feather="shield" class="me-1"></i> ุงูุฃูุงู ูุงูุชูุธูู:</h6>
                            <ul class="small">
                                <li>ุญุฌุจ ุงูุฅุนูุงูุงุช ุจุฏูุฉ 95%</li>
                                <li>ุฅุฒุงูุฉ ุนูุงุตุฑ ุงูุชุชุจุน</li>
                                <li>ูุญุต ุงูุซุบุฑุงุช ุงูุฃูููุฉ</li>
                                <li>ุชูุธูู SSL ูTLS</li>
                                <li>ูุดู ุงูุจุฑูุฌูุงุช ุงูุถุงุฑุฉ</li>
                                <li>ุญูุงูุฉ ุงูุฎุตูุตูุฉ</li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h6><i data-feather="zap" class="me-1"></i> ุงูุฃุฏุงุก ูุงูุชุญููู:</h6>
                            <ul class="small">
                                <li>ููุงุณ ุณุฑุนุฉ ุงูุชุญููู</li>
                                <li>Core Web Vitals</li>
                                <li>ุชุญุณูู ุงูุงุณุชุฌุงุจุฉ</li>
                                <li>ุชุญููู ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ</li>
                                <li>ูุญุต ุงูุจูุงูุงุช ุงูููุธูุฉ</li>
                                <li>ุชูููู SEO ุดุงูู</li>
                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h6><i data-feather="tool" class="me-1"></i> ุจุนุฏ ุงูุงุณุชุฎุฑุงุฌ:</h6>
                            <ul class="small">
                                <li>ุชุดุบูู ุชููุงุฆู ูููููุน ุงูููุณูุฎ</li>
                                <li>ุชูุงุฑูุฑ ุชุญููู ุดุงููุฉ</li>
                                <li>ููุงุฑูุงุช ูุน ุงูููุงูุณูู</li>
                                <li>ุชูุตูุงุช ุงูุชุญุณูู</li>
                                <li>ุฎุทุฉ ุงูุนูู ุงูููุชุฑุญุฉ</li>
                                <li>ุฏููู ุงูุชุทููุฑ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript ุงููุญุฏุซ -->
<script>
class ComprehensiveWebsiteExtractor {
    constructor() {
        this.extractionId = null;
        this.updateInterval = null;
        this.analysisResults = {};
        this.init();
    }
    
    init() {
        document.getElementById('extractorForm').addEventListener('submit', (e) => {
            e.preventDefault();
            this.startComprehensiveExtraction();
        });
        
        document.getElementById('launchBtn').addEventListener('click', () => {
            this.launchExtractedSite();
        });
        
        document.getElementById('downloadBtn').addEventListener('click', () => {
            this.downloadResults();
        });
        
        document.getElementById('viewReportBtn').addEventListener('click', () => {
            this.viewComprehensiveReport();
        });
        
        document.getElementById('newExtractionBtn').addEventListener('click', () => {
            this.resetForm();
        });
        
        feather.replace();
    }
    
    async startComprehensiveExtraction() {
        const formData = this.collectFormData();
        
        if (!formData.url) {
            alert('ูุฑุฌู ุฅุฏุฎุงู ุฑุงุจุท ุงููููุน');
            return;
        }
        
        try {
            this.showProgress();
            
            // ุจุฏุก ุงูุงุณุชุฎุฑุงุฌ ุงูุฃุณุงุณู
            const extractResponse = await fetch('/extract-website', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData)
            });
            
            const extractResult = await extractResponse.json();
            
            if (extractResult.success) {
                this.extractionId = extractResult.extraction_id;
                
                // ุชุดุบูู ุงูุชุญูููุงุช ุงููุฎุชุงุฑุฉ ุจุงูุชูุงุฒู
                await this.runSelectedAnalyses(formData);
                
                this.showComprehensiveResults(extractResult);
            } else {
                throw new Error(extractResult.error || 'ูุดู ูู ุจุฏุก ุงูุงุณุชุฎุฑุงุฌ');
            }
            
        } catch (error) {
            console.error('ุฎุทุฃ ูู ุจุฏุก ุงูุงุณุชุฎุฑุงุฌ:', error);
            alert('ุญุฏุซ ุฎุทุฃ ูู ุจุฏุก ุงูุงุณุชุฎุฑุงุฌ: ' + error.message);
            this.hideProgress();
        }
    }
    
    collectFormData() {
        return {
            url: document.getElementById('websiteUrl').value.trim(),
            max_pages: parseInt(document.getElementById('maxPages').value),
            extraction_depth: document.getElementById('extractionDepth').value,
            analyses: {
                security: document.getElementById('enableSecurity').checked,
                performance: document.getElementById('enablePerformance').checked,
                seo: document.getElementById('enableSEO').checked,
                tech: document.getElementById('enableTech').checked,
                content: document.getElementById('enableContent').checked,
                competitor: document.getElementById('enableCompetitor').checked
            },
            options: {
                use_ai_blocker: document.getElementById('useAIBlocker').checked,
                remove_ads: document.getElementById('removeAds').checked,
                remove_tracking: document.getElementById('removeTracking').checked,
                clean_code: document.getElementById('cleanCode').checked,
                extract_text: document.getElementById('extractText').checked,
                extract_images: document.getElementById('extractImages').checked,
                extract_css: document.getElementById('extractCSS').checked,
                extract_js: document.getElementById('extractJS').checked,
                extract_structure: document.getElementById('extractStructure').checked,
                extract_meta: document.getElementById('extractMeta').checked
            }
        };
    }
    
    async runSelectedAnalyses(formData) {
        const promises = [];
        
        if (formData.analyses.security) {
            promises.push(this.runSecurityAnalysis(formData.url));
        }
        
        if (formData.analyses.performance) {
            promises.push(this.runPerformanceAnalysis(formData.url));
        }
        
        if (formData.analyses.seo) {
            promises.push(this.runSEOAnalysis(formData.url));
        }
        
        try {
            const results = await Promise.allSettled(promises);
            this.processAnalysisResults(results, formData.analyses);
        } catch (error) {
            console.error('ุฎุทุฃ ูู ุชุดุบูู ุงูุชุญูููุงุช:', error);
        }
    }
    
    async runSecurityAnalysis(url) {
        const response = await fetch('/api/security-analyze', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ url })
        });
        return { type: 'security', data: await response.json() };
    }
    
    async runPerformanceAnalysis(url) {
        const response = await fetch('/api/performance-analyze', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ url })
        });
        return { type: 'performance', data: await response.json() };
    }
    
    async runSEOAnalysis(url) {
        const response = await fetch('/api/seo-analyze', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ url })
        });
        return { type: 'seo', data: await response.json() };
    }
    
    processAnalysisResults(results, enabledAnalyses) {
        results.forEach((result, index) => {
            if (result.status === 'fulfilled') {
                const analysisResult = result.value;
                this.analysisResults[analysisResult.type] = analysisResult.data;
                this.updateAnalysisStats(analysisResult.type, analysisResult.data);
            }
        });
    }
    
    updateAnalysisStats(type, data) {
        if (type === 'security' && data.security_issues) {
            document.getElementById('securityIssues').textContent = data.security_issues.length || 0;
        }
        
        if (type === 'seo' && data.overall_score) {
            document.getElementById('seoScore').textContent = Math.round(data.overall_score) || 0;
        }
    }
    
    showProgress() {
        document.getElementById('progressSection').style.display = 'block';
        document.getElementById('liveStats').style.display = 'block';
        document.getElementById('resultsSection').style.display = 'none';
    }
    
    hideProgress() {
        document.getElementById('progressSection').style.display = 'none';
        document.getElementById('liveStats').style.display = 'none';
    }
    
    showComprehensiveResults(extractResult) {
        this.hideProgress();
        document.getElementById('resultsSection').style.display = 'block';
        
        // ุนุฑุถ ููุฎุต ุงูุงุณุชุฎุฑุงุฌ
        this.displayExtractionSummary(extractResult);
        
        // ุนุฑุถ ูุชุงุฆุฌ ุงูุชุญูููุงุช
        this.displayAnalysisResults();
    }
    
    displayExtractionSummary(result) {
        const summary = document.getElementById('extractionSummary');
        summary.innerHTML = `
            <li>โ ุชู ุงุณุชุฎุฑุงุฌ ${result.pages_extracted || 0} ุตูุญุฉ ุจูุฌุงุญ</li>
            <li>๐ผ๏ธ ุชู ุชุญููู ${result.images_downloaded || 0} ุตูุฑุฉ</li>
            <li>๐จ ุชู ุชุญููู ${result.css_files || 0} ููู CSS</li>
            <li>โก ุชู ุชุญููู ${result.js_files || 0} ููู JavaScript</li>
            <li>๐ก๏ธ ุชู ุญุฐู ${result.ads_removed || 0} ุนูุตุฑ ุฅุนูุงูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู</li>
            <li>๐ ุชู ุญุฐู ${result.tracking_removed || 0} ุนูุตุฑ ุชุชุจุน</li>
            <li>๐ ุชู ุฅุฌุฑุงุก ${Object.keys(this.analysisResults).length} ุชุญููู ุดุงูู</li>
        `;
    }
    
    displayAnalysisResults() {
        const resultsContainer = document.getElementById('analysisResults');
        let resultsHTML = '';
        
        Object.entries(this.analysisResults).forEach(([type, data]) => {
            const typeNames = {
                security: 'ุงูุฃูุงู',
                performance: 'ุงูุฃุฏุงุก', 
                seo: 'SEO'
            };
            
            const score = data.overall_score || data.security_score || data.performance_score || 0;
            const scoreClass = score >= 80 ? 'success' : score >= 60 ? 'warning' : 'danger';
            
            resultsHTML += `
                <div class="col-md-4 mb-3">
                    <div class="card border-${scoreClass}">
                        <div class="card-body text-center">
                            <h5 class="card-title">${typeNames[type]}</h5>
                            <h3 class="text-${scoreClass}">${Math.round(score)}/100</h3>
                            <button class="btn btn-sm btn-outline-${scoreClass}" onclick="viewAnalysisDetails('${type}')">
                                ุนุฑุถ ุงูุชูุงุตูู
                            </button>
                        </div>
                    </div>
                </div>
            `;
        });
        
        resultsContainer.innerHTML = resultsHTML;
    }

    launchExtractedSite() {
        if (this.extractionId) {
            const launchUrl = `/launch-extracted/${this.extractionId}`;
            window.open(launchUrl, '_blank', 'width=1200,height=800,scrollbars=yes,resizable=yes');
        } else {
            alert('โ ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููููุน ุงููุณุชุฎุฑุฌ');
        }
    }
    
    downloadResults() {
        if (this.extractionId) {
            window.open(`/api/download-extraction/${this.extractionId}`, '_blank');
        }
    }
    
    viewComprehensiveReport() {
        if (this.extractionId) {
            window.open(`/api/extraction-report/${this.extractionId}`, '_blank');
        }
    }
    
    resetForm() {
        document.getElementById('extractorForm').reset();
        document.getElementById('resultsSection').style.display = 'none';
        this.extractionId = null;
        this.analysisResults = {};
    }
}

// ุฏูุงู ุฅุถุงููุฉ
function openAnalysisTool(tool) {
    const urls = {
        security: '/security-analysis',
        performance: '/performance-analysis', 
        seo: '/seo-analysis',
        competitor: '/competitor-analysis',
        comprehensive: '/comprehensive-analysis',
        dashboard: '/dashboard'
    };
    
    if (urls[tool]) {
        window.open(urls[tool], '_blank');
    }
}

function analyzeBeforeExtract() {
    const url = document.getElementById('websiteUrl').value.trim();
    if (url) {
        window.open(`/analyze?url=${encodeURIComponent(url)}`, '_blank');
    } else {
        alert('ูุฑุฌู ุฅุฏุฎุงู ุฑุงุจุท ุฃููุงู');
    }
}

function previewAnalysis() {
    const url = document.getElementById('websiteUrl').value.trim();
    if (url) {
        // ูุชุญ ูุนุงููุฉ ุณุฑูุนุฉ
        alert('๐ ุฌุงุฑู ุชุญุถูุฑ ุงููุนุงููุฉ ุงูุณุฑูุนุฉ...');
        // ูููู ุฅุถุงูุฉ API ุฎุงุต ุจุงููุนุงููุฉ ุงูุณุฑูุนุฉ
    } else {
        alert('ูุฑุฌู ุฅุฏุฎุงู ุฑุงุจุท ุฃููุงู');
    }
}

function viewAnalysisDetails(type) {
    // ุนุฑุถ ุชูุงุตูู ุงูุชุญููู ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ
    const tools = {
        security: '/security-analysis',
        performance: '/performance-analysis',
        seo: '/seo-analysis'
    };
    
    if (tools[type]) {
        window.open(tools[type], '_blank');
    }
}

// ุชููุฆุฉ ุงูุฃุฏุงุฉ ุงูุดุงููุฉ
document.addEventListener('DOMContentLoaded', function() {
    const extractor = new ComprehensiveWebsiteExtractor();
    feather.replace();
});
</script>

<style>
.btn-outline-purple {
    color: #6f42c1;
    border-color: #6f42c1;
}
.btn-outline-purple:hover {
    color: #fff;
    background-color: #6f42c1;
    border-color: #6f42c1;
}
.bg-gradient-primary {
    background: linear-gradient(45deg, #007bff, #0056b3) !important;
}
</style>
{% endblock %}
